language: c

env:
  global:
    - BYOND_MAJOR="511"
    - BYOND_MINOR="1385"
    - DM_BUILDFILE="baystation12.dme"

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install libc6:i386 libgcc1:i386 libstdc++6:i386 -qq

install:
  - curl "http://www.byond.com/download/build/LATEST/${BYOND_MAJOR}.${BYOND_MINOR}_byond_linux.zip" -o byond.zip
  - unzip byond.zip
  - cd byond
  - sudo make install
  - cd ..

script:
  - DreamMaker $(DM_BUILDFILE)

notifications:
  webhooks:
    urls:
      - https://discordapp.com/api/webhooks/302202614437904385/9lbEb4WO1LzNHXiRlY8y79INDf_XvmyvE79_y9oBk-iIvJ7GHmLMruIsPlw6QWyHEp5m
    on_success: change  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: never     # options: [always|never|change] default: always
